<div class="page-header">
  <h1>
    Photos
    <a href="/photos/new" class="btn btn-lg btn-success">New Photo</a>
  </h1>
</div>


<% @photos.each do |photo| %>
<div class="panel panel-default">
  <div class="panel-heading"><%= User.find(photo.user_id).username %></div>
  <div class="panel-body">
    <!-- Panel content -->
    <td><img src="<%= photo.image %>" class="img-responsive" alt="Responsive image"></td>

    <% if photo.likes.count > 1 %>
    <td><%= User.find(photo.likes.pluck(:user_id)).collect { |u| "#{u[:username]}"}.to_sentence %> like this</td>
    <% elsif photo.likes.count == 0 %>
    <td> be the first to like this</td>
    <% elsif photo.likes.count == 1 %>
    <td><%= User.find(photo.likes.pluck(:user_id)).collect { |u| "#{u[:username]}"}.to_sentence %> likes this</td>
<% end %>
  </div>
</div>
<% end %>


<div class="row">
  <div class="col-md-12">
    <table class="table table-striped table-hover">
      <tr>
        <th>Caption</th>
        <th>Image</th>
        <th>User</th>
        <th>Actions</th>
      </tr>

      <% @photos.each do |photo| %>
      <tr>
        <td><%= photo.caption %></td>
        <td><%= photo.image %></td>
        <td><%= photo.user_id %></td>
        <td>
          <a href="/photos/<%= photo.id %>" class="btn btn-primary">Show</a>
          <a href="/photos/<%= photo.id %>/edit" class="btn btn-warning">Edit</a>
          <a href="/delete_photo/<%= photo.id %>" class="btn btn-danger" rel="nofollow">Delete</a>
        </td>
      </tr>
      <% end %>
    </table>
  </div>
</div>
